import{b as x}from"./chunk-CJZT23PP.js";import{b as te,d as ie}from"./chunk-5WFT5PRI.js";import{a as ee}from"./chunk-W3XRPWO3.js";import{a as Z}from"./chunk-JSEALS6B.js";import"./chunk-ROSI6QSI.js";import"./chunk-VYAYXPXE.js";import"./chunk-OMG2A7U2.js";import{b as q}from"./chunk-VLMSGL5J.js";import"./chunk-DY7UBFIR.js";import"./chunk-MV2P2U5R.js";import{$ as N,A as s,B as h,C as D,Ca as E,E as j,H as S,I as g,Ia as z,Ja as y,K as T,L as I,M as n,N as r,Na as J,O as G,P as C,Pa as K,Q as _,Qa as Q,R as m,Sa as W,Ta as X,U as O,Va as Y,X as o,Y as f,Z as P,_ as $,aa as w,i as b,ia as H,ka as L,la as U,oa as F,p as k,r as M,s as V,ta as R,u,v,xa as B}from"./chunk-EYTT7SII.js";var ne=(()=>{let l=class l{constructor(e,t){this.http=e,this.host=t,this._project=new x,this._host=t,this._http=e}Saved(e){let t=new U().set("Content-Type","application/json");var i=this._http.post(this._host.GetHostApi()+"Project/SaveProject",e);return i}Upbdate(e){let t=new U().set("Content-Type","application/json");var i=this._http.post(this._host.GetHostApi()+"Project/UpdateProject",e);return i}Delete(e){var t=this._http.delete(this._host.GetHostApi()+"Project/DeleteProjectById?id="+e);return t}GetAllProject(e,t){this._listProject=new Array;var i=this._http.get(this._host.GetHostApi()+`Project/GetAllProject?filter=${e}&page=${t}`);return i}GetAllProjectByCompany(e,t){e==""&&(e="00000000-0000-0000-0000-000000000000"),this._listProject=new Array;var i=this._http.get(this._host.GetHostApi()+`Project/GetAllProjectByCompany?id=${e}&page=${t}`);return i.subscribe(p=>{this._listProject=p.data}),i}GetListAdress(e,t,i){var p=this._http.get(this._host.GetHostApi()+`Concept/GetAllConcept?filter=${e}&type=${t}&page=${i}`);return p}GetProjectById(e){var t=this._http.get(this._host.GetHostApi()+`Project/GetProjectById?idProject=${e}`);return t}GetAllCompanys(e,t){this._listCompany=new Array;var i=this._http.get(this._host.GetHostApi()+`Company/GetAllCompany?filter=${e}&page=${t}`);return i}};l.\u0275fac=function(t){return new(t||l)(M(F),M(E))},l.\u0275prov=k({token:l,factory:l.\u0275fac,providedIn:"root"});let a=l;return a})();function pe(a,l){if(a&1){let c=C();n(0,"button",26),_("click",function(){u(c);let t=m();return v(t.Route("https://www.google.com/maps?q="+t.ExtractLatLong(t._projectService._project.gpsGoogle)))}),o(1,"Abrir mapa"),r()}}function se(a,l){if(a&1&&(n(0,"option",7),o(1),r()),a&2){let c=m();s(1),P(" ",c.languageTraslate("Seleccionar"),"")}}function de(a,l){if(a&1&&(n(0,"option",7),o(1),r()),a&2){let c=m();s(1),P(" ",c.GetProjectAdressName(c._projectService._project.addressItemId),"")}}var me=(a,l)=>l.id;function _e(a,l){if(a&1&&(n(0,"option",27),o(1),r()),a&2){let c=l.$implicit;O("value",c.id),s(1),f(c.name)}}function ue(a,l){if(a&1&&T(0,_e,2,2,"option",27,me),a&2){let c=m();I(c._projectService.adressList)}}function ve(a,l){if(a&1){let c=C();n(0,"button",26),_("click",function(){u(c);let t=m();return v(t.SaveAndUpdateProject())}),G(1,"i",28),r()}}function je(a,l){if(a&1){let c=C();n(0,"app-common-menu-grid",29),_("Edit",function(t){u(c);let i=m();return v(i.Edit(t))})("Delete",function(t){u(c);let i=m();return v(i.Delete(t))})("ClearData",function(t){u(c);let i=m();return v(i.ClearData(t))}),r()}if(a&2){let c=m();j("IsDelete",!1)("item",c._projectService._rowSeletion)}}var he=(a,l)=>l.name,A=a=>({"row-select":a});function fe(a,l){if(a&1){let c=C();n(0,"div",30),_("click",function(){let i=u(c).$implicit,p=m(2);return v(p.Selection(i.id))}),n(1,"p"),o(2),r()(),n(3,"div",31),_("click",function(){let i=u(c).$implicit,p=m(2);return v(p.Selection(i.id))}),n(4,"p"),o(5),r()(),n(6,"div",30),_("click",function(){let i=u(c).$implicit,p=m(2);return v(p.Selection(i.id))}),n(7,"p"),o(8),r()(),n(9,"div",30),_("click",function(){let i=u(c).$implicit,p=m(2);return v(p.Selection(i.id))}),n(10,"p"),o(11),r()()}if(a&2){let c=l.$implicit,e=m(2);j("ngClass",w(10,A,e._projectService._rowSeletion==c.id)),s(2),P(" ",c.conceptCompany.name,""),s(1),j("ngClass",w(12,A,e._projectService._rowSeletion==c.id))("id",c.id),s(2),f(c.name),s(1),j("ngClass",w(14,A,e._projectService._rowSeletion==c.id)),s(2),$(" ",c.mobileNumber,"- ",c.phoneNumber,""),s(1),j("ngClass",w(16,A,e._projectService._rowSeletion==c.id)),s(2),f(c.typeCompanyMode)}}function ge(a,l){if(a&1&&T(0,fe,12,18,null,null,he),a&2){let c=m();I(c._projectService._listProject)}}var De=(()=>{let l=class l{constructor(e,t,i,p,d,re,oe){this.title=t,this.router=re,this._Alert=oe,this._configservice=e,this._projectService=i,this._cdRef=p,this._Permission=d}ngOnInit(){this.title.setTitle("Actualizar sucursal");var e=this._Permission.ValidationLogin("admin-project");e&&(this.GetListAdressConcept(z.AdressConcept()),this.GetAllProject("all"))}Delete(e){return b(this,null,function*(){var t=yield this._projectService.Delete(e).subscribe(i=>{i.status?(this.DeleteList(e),this._Alert.Alert("Eliminado"),this.ClearData("")):this._Alert.Alert("No Eliminado")})})}Edit(e){this._projectService.GetProjectById(e).subscribe(t=>{this._projectService._project=t.data})}ClearData(e){this._projectService._project=new x,this._projectService._rowSeletion=""}DeleteList(e){let t=this._projectService._listProject.findIndex(i=>i.id===e);t!==-1&&this._projectService._listProject.splice(t,1)}SaveAndUpdateProject(){return b(this,null,function*(){this._projectService._project.id!="00000000-0000-0000-0000-000000000000"&&this.UpdateProject()})}UpdateProject(){return b(this,null,function*(){this.ValidateConcept(),this._projectService.Upbdate(this._projectService._project).subscribe(e=>{e.status?(this._projectService._listProject=this._projectService._listProject.filter(t=>t.id!=this._projectService._project.id),this._projectService._listProject.push(e.data),this._projectService._project=new x,this._cdRef.detectChanges(),this._Alert.Alert("Actualizado")):this._Alert.Alert("No Actualizado"),this.ClearData("")})})}onSelectChangeAdress(e){let t=e.target.value;if(this._projectService._project==null&&(this._projectService._project=new x),t!="0"){let i=this._projectService.adressList.find(p=>p.id==t);if(i==null||i==null)return!1;this._projectService._project.addressItemId=i.id}return!0}GetListAdressConcept(e){this._projectService.adressList=new Array;var t=this._projectService.GetListAdress("all",e,0);t.subscribe(i=>{this._projectService.adressList=i.data})}GetAllProject(e){this._projectService._listProject=new Array,this._projectService.GetAllProject(e,0).subscribe(t=>{this._projectService._listProject=t.data})}GetAllCompany(e){this._projectService._listCompany=new Array,this._projectService.GetAllCompanys(e,0).subscribe(t=>{this._projectService._listCompany=t.data})}onSelectChangeHorEnd(e){var t=e.target.value;this._projectService._project.storeClosingTime=t}onSelectChangeHorStart(e){var t=e.target.value;this._projectService._project.storeOpeningTime=t}onSelectChangeCompany(e){var t=e.target.value,i=this._projectService._listCompany.find(d=>d.id==t);if(i!=null){var p=new y;p.id=i.id,p.name=i.name,this._projectService._project.conceptCompany=p,this._projectService._project.idCompany=p.id}}onSelectChangeTypeProject(e){var t=e.target.value;t!=""&&t!=0&&(this._projectService._project.typeCompanyMode=t)}GetProjectAdressName(e){var t=this._projectService.adressList.find(i=>i.id==e);return t?.concept.name+" "+t?.name}Selection(e){this._projectService._rowSeletion=e,this._cdRef.detectChanges()}languageTraslate(e){return e}ValidateConcept(){this._projectService._project.conceptCompany==null&&(this._projectService._project.conceptCompany=new y),this._projectService._project.conceptPrevious==null&&(this._projectService._project.conceptPrevious=new y),this._projectService._project.conceptProject==null&&(this._projectService._project.conceptProject=new y),this._projectService._project.addressItemId==""&&(this._projectService._project.addressItemId="")}Route(e){window.open(e,"_blank")}ExtractLatLong(e){let t=/@(-?\d+\.\d+),(-?\d+\.\d+)/,i=e.match(t);if(i&&i.length>=3){var p=`${i[1]},${i[2]}`;return p}else return""}NullProductSelectId(e){if(this._projectService._rowSeletion==null||this._projectService._rowSeletion=="")return!1;if(e!="0"){if(this._projectService._rowSeletion==e)return!0}else if(this._projectService._rowSeletion!="")return!0;return!1}};l.\u0275fac=function(t){return new(t||l)(h(E),h(R),h(ne),h(D),h(Z),h(B),h(q))},l.\u0275cmp=V({type:l,selectors:[["app-admin-project-vendor"]],standalone:!0,features:[N],decls:100,vars:15,consts:[[1,"concept-item"],[1,"container-input"],[1,"text-form"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","text","name","code",3,"ngModel","ngModelChange"],[1,"gps-btn"],[3,"change"],["value","0","selected",""],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["value","13"],["value","14"],["value","15"],["value","16"],["value","17"],["value","18"],[1,"btn-scroll"],[3,"IsDelete","item"],["columns","4"],[1,"div-header"],[2,"height","200px","width","100vw"],[3,"click"],[3,"value"],[1,"bi","bi-floppy2-fill"],[3,"IsDelete","item","Edit","Delete","ClearData"],[1,"div-item",3,"ngClass","click"],[1,"div-item",3,"ngClass","id","click"]],template:function(t,i){t&1&&(n(0,"app-permission")(1,"div",0)(2,"div",1)(3,"div",2)(4,"p"),o(5),r(),n(6,"input",3),_("ngModelChange",function(d){return i._projectService._project.name=d}),r()(),n(7,"div",2)(8,"p"),o(9),r(),n(10,"input",4),_("ngModelChange",function(d){return i._projectService._project.mobileNumber=d}),r()(),n(11,"div",2)(12,"p"),o(13),r(),n(14,"input",4),_("ngModelChange",function(d){return i._projectService._project.phoneNumber=d}),r()(),n(15,"div",5)(16,"p"),o(17),r(),n(18,"input",4),_("ngModelChange",function(d){return i._projectService._project.gpsGoogle=d}),r(),S(19,pe,2,0,"button"),r(),n(20,"p",2),o(21),n(22,"select",6),_("change",function(d){return i.onSelectChangeAdress(d)}),S(23,se,2,1,"option",7)(24,de,2,1)(25,ue,2,0),r()(),n(26,"div",2)(27,"p"),o(28,"Apertura de la tienda "),r(),n(29,"select",6),_("change",function(d){return i.onSelectChangeHorStart(d)}),n(30,"option",8),o(31,"6:00:am"),r(),n(32,"option",9),o(33,"7:00:am"),r(),n(34,"option",10),o(35,"8:00:am"),r(),n(36,"option",11),o(37,"9:00:am"),r(),n(38,"option",12),o(39,"10:00:am"),r(),n(40,"option",13),o(41,"11:00:am"),r(),n(42,"option",14),o(43,"12:00:am"),r(),n(44,"option",15),o(45,"1:00:pm"),r(),n(46,"option",16),o(47,"2:00:pm"),r(),n(48,"option",17),o(49,"3:00:pm"),r(),n(50,"option",18),o(51,"4:00:pm"),r(),n(52,"option",19),o(53,"5:00:pm"),r(),n(54,"option",20),o(55,"6:00:pm"),r()()(),n(56,"div",2)(57,"p"),o(58,"Cierre de la tienda "),r(),n(59,"select",6),_("change",function(d){return i.onSelectChangeHorEnd(d)}),n(60,"option",8),o(61,"6:00:am"),r(),n(62,"option",9),o(63,"7:00:am"),r(),n(64,"option",10),o(65,"8:00:am"),r(),n(66,"option",11),o(67,"9:00:am"),r(),n(68,"option",12),o(69,"10:00:am"),r(),n(70,"option",13),o(71,"11:00:am"),r(),n(72,"option",14),o(73,"12:00:am"),r(),n(74,"option",15),o(75,"1:00:pm"),r(),n(76,"option",16),o(77,"2:00:pm"),r(),n(78,"option",17),o(79,"3:00:pm"),r(),n(80,"option",18),o(81,"4:00:pm"),r(),n(82,"option",19),o(83,"5:00:pm"),r(),n(84,"option",20),o(85,"6:00:pm"),r()()()(),n(86,"div",21),S(87,ve,2,0,"button"),r()(),S(88,je,1,2,"app-common-menu-grid",22),n(89,"app-common-custom-grid",23)(90,"div",24),o(91," Empresa "),r(),n(92,"div",24),o(93," Sucursal "),r(),n(94,"div",24),o(95," Celular "),r(),n(96,"div",24),o(97," Tipo "),r(),S(98,ge,2,0),r(),G(99,"div",25),r()),t&2&&(s(5),f(i.languageTraslate("Nombre")),s(1),j("ngModel",i._projectService._project.name),s(3),f(i.languageTraslate("Celular")),s(1),j("ngModel",i._projectService._project.mobileNumber),s(3),f(i.languageTraslate("Telefono")),s(1),j("ngModel",i._projectService._project.phoneNumber),s(3),f(i.languageTraslate("Url GPS google map")),s(1),j("ngModel",i._projectService._project.gpsGoogle),s(1),g(19,i._projectService._project.gpsGoogle!=""?19:-1),s(2),P(" ",i.languageTraslate("Ubicaci\xF3n de venta")," "),s(2),g(23,i._projectService._project.id=="00000000-0000-0000-0000-000000000000"?23:24),s(2),g(25,i._projectService.adressList!=null?25:-1),s(62),g(87,i._projectService._project.id!="00000000-0000-0000-0000-000000000000"?87:-1),s(1),g(88,i.NullProductSelectId("0")?88:-1),s(10),g(98,i._projectService._listProject!=null?98:-1))},dependencies:[Y,W,X,J,K,Q,L,H,ee,te,ie],styles:[".container-input[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);padding:5px;gap:10px}.scroll-menu[_ngcontent-%COMP%]{width:100vw;overflow:hidden}.containe-concept-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px;row-gap:5px;column-gap:5px;background-color:#000;width:100%;overflow:auto}.containe-concept-menu[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{min-width:100px;padding:5px;border-radius:5px;background-color:#000;color:#fff}.active[_ngcontent-%COMP%]{border:1px solid white;box-shadow:-1px 1px 2px #fff,inset 0 0 8px #fff}.disable[_ngcontent-%COMP%]{border:none;box-shadow:0 0 2px #fff}.btn-scroll[_ngcontent-%COMP%]{display:flex;justify-content:end;column-gap:10px;align-items:center;background-color:#ff4500;box-shadow:0 0 5px #000;padding:5px;border-radius:5px;height:50px}.btn-scroll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;background-color:#000;box-shadow:0 0 5px #000,inset 0 0 5px #fff;color:#fff;padding:2px;height:45px;min-width:50px;display:flex;justify-content:center;align-items:center}.btn-scroll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}.scroll[_ngcontent-%COMP%]{display:flex;width:99%;padding:5px;background-color:#0ff;height:200px;overflow:hidden;justify-content:start}.container-concep[_ngcontent-%COMP%]{display:grid;row-gap:1px;grid-template-columns:repeat(4,1fr);background-color:red;grid-template-rows:min-content;width:100%;align-content:start;overflow-y:auto}.div-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#000;border:1px solid white;height:30px;color:#fff}.div-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:gray;border:1px solid white;height:30px;color:#fff;position:relative}.row-select[_ngcontent-%COMP%]{background-color:green}.edit-visible[_ngcontent-%COMP%]{top:5px;right:0;position:absolute}p[_ngcontent-%COMP%]{color:#fff;font-size:18px}"]});let a=l;return a})();export{De as UpdateProject};
