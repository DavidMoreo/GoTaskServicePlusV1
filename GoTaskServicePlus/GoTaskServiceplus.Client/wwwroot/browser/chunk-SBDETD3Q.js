import{a as X}from"./chunk-T5767ZUU.js";import{a as Y}from"./chunk-5Q3WGLKV.js";import{a as W}from"./chunk-VNTGGUTZ.js";import"./chunk-W3XRPWO3.js";import{a as J}from"./chunk-JSEALS6B.js";import{a as K}from"./chunk-ROSI6QSI.js";import"./chunk-VYAYXPXE.js";import{a as D}from"./chunk-OMG2A7U2.js";import"./chunk-VLMSGL5J.js";import"./chunk-DY7UBFIR.js";import"./chunk-MV2P2U5R.js";import{$ as R,A as _,B as m,C as V,Ca as z,Da as G,E as B,H as u,I as p,J as P,K as M,L as w,M as l,N as c,Na as A,O as g,P as C,Pa as H,Q as v,Qa as U,R as a,U as I,Va as N,X as S,Z as k,_ as E,da as F,ea as j,ga as L,i as y,s as T,ta as q,u as x,v as f,va as $,x as O,xa as Q}from"./chunk-EYTT7SII.js";var b=class extends G{constructor(){super(...arguments),this.destinationId="00000000-0000-0000-0000-000000000000",this.OriginId="00000000-0000-0000-0000-000000000000",this.idMsgRefer="00000000-0000-0000-0000-000000000000",this.idChat="00000000-0000-0000-0000-000000000000",this.referenceMsg=new Y,this.Link=new Array,this.msg="",this.value="",this.isBot=!1,this.isProduct=!1,this.ico="",this.price=""}};var nt=["scrollContainer"],ot=(t,o)=>o.id;function rt(t,o){if(t&1&&(g(0,"br"),l(1,"p",10),S(2),c()),t&2){let e=a().$implicit;_(2),k(" ",e,"")}}function st(t,o){if(t&1&&u(0,rt,3,1),t&2){let e=o.$implicit;p(0,e!=""?0:-1)}}function at(t,o){if(t&1&&(l(0,"div",9),M(1,st,1,1,null,null,P),c()),t&2){let e=a().$implicit;_(1),w(e.msg.split(`
`))}}function ct(t,o){if(t&1&&(g(0,"br"),l(1,"p",10),S(2),c()),t&2){let e=a().$implicit;_(2),k(" ",e,"")}}function lt(t,o){if(t&1&&u(0,ct,3,1),t&2){let e=o.$implicit;p(0,e!=""?0:-1)}}function dt(t,o){if(t&1&&M(0,lt,1,1,null,null,P),t&2){let e=a(2).$implicit;w(e.msg.split(`
`))}}function _t(t,o){if(t&1&&g(0,"img",14),t&2){let e=a(3).$implicit;I("src",e.firsImg,O)}}function pt(t,o){if(t&1){let e=C();u(0,_t,1,1,"img",12),l(1,"p",13),v("click",function(){x(e);let i=a(2).$implicit,r=a();return f(r.SelctProduct(i.value))}),S(2),c()}if(t&2){let e=a(2).$implicit;p(0,0),_(2),E(" ",e.msg," ",e.price," ")}}function mt(t,o){if(t&1&&(l(0,"div",11),u(1,dt,2,0)(2,pt,3,3),c()),t&2){let e=a().$implicit;_(1),p(1,e.isProduct?2:1)}}function ut(t,o){if(t&1&&u(0,at,3,0,"div",8)(1,mt,3,1),t&2){let e=o.$implicit;p(0,e.isBot?1:0)}}function ht(t,o){t&1&&g(0,"img",15)}function gt(t,o){t&1&&(l(0,"div",16)(1,"button",17),g(2,"i",18),c()())}function xt(t,o){if(t&1){let e=C();l(0,"button",22),v("click",function(){x(e);let i=a(2);return f(i.startRecording())}),g(1,"i",23),c()}}function ft(t,o){if(t&1){let e=C();l(0,"button",22),v("click",function(){x(e);let i=a(2);return f(i.stoptRecording())}),g(1,"i",24),c()}}function Ct(t,o){if(t&1){let e=C();l(0,"textarea",19),v("keyup.enter",function(){x(e);let i=a();return f(i.QuestionMsg())})("ngModelChange",function(i){x(e);let r=a();return f(r.question=i)}),c(),l(1,"div",20),u(2,xt,2,0,"button",21)(3,ft,2,0,"button",21),c()}if(t&2){let e=a();B("ngModel",e.question),_(2),p(2,e.statusSpeech?-1:2),_(1),p(3,e.statusSpeech?3:-1)}}function vt(t,o){if(t&1){let e=C();l(0,"textarea",25),v("keyup.enter",function(){x(e);let i=a();return f(i.QuestionMsg())}),c()}if(t&2){let e=a();B("value",e.question)}}function bt(t,o){if(t&1){let e=C();l(0,"button",26),v("click",function(){x(e);let i=a();return f(i.QuestionMsg())}),g(1,"i",27),c()}}function Mt(t,o){if(t&1){let e=C();l(0,"button",26),v("click",function(){x(e);let i=a();return f(i.CancelPrediction())}),g(1,"i",28),c()}}var Gt=(()=>{let o=class o{constructor(n,i,r,h,s,d,Z,tt,et,it){this.route=n,this.type="all",this.page=0,this._param=r,this._titleService=i,this._search=h,this._chatBotService=s,this._configService=d,this._SpeechRecognition=Z,this._cdRef=tt,this._Permission=et,this._Util=it}ngOnInit(){this._titleService.setTitle("Mis Productos");var n=new b,i="Hola, \xBFc\xF3mo est\xE1s? \xA1Qu\xE9 alegr\xEDa que est\xE9s aqu\xED! Estoy aqu\xED para ayudarte. Escribe el nombre de alg\xFAn producto en particular. Puedes conocer m\xE1s sobre Go Task Service y en futuras actualizaciones tendr\xE9 nuevas funcionalidades, todo buscando mejorar tu experiencia. Recuerda compartirnos en tus redes sociales. \xA1Muchas gracias!";n.msg=n.msg=this.GetSplitResponse(i)[0],n.id="0",n.isBot=!0,this.initVoiceInput()}loadData(){return y(this,null,function*(){})}searchProduct(n){this.route.navigate([n])}QuestionMsg(){if(this._chatBotService.chatListStatus&&this.question!=""){this._chatBotService.chatListStatus=!1;var n=new b;n.msg=this.question,this._chatBotService.chatList.push(n);var i=this._chatBotService.ChatMsg(this.question);i.subscribe(r=>{this.question="";var h=new Array;h=r.data;var s=new b;h?.forEach(d=>{s=new b,d.isProduct?s.msg=d.name:s.msg=d.value,s.name=d.name,s.id=d.id,s.value=d.value,s.isBot=!0,s.isProduct=d.isProduct,s.price=d.priceString,d.isProduct&&d.url!=null&&d.url!=""&&(s.firsImg=this._configService.GetUrlImg(d.url,"PHONE")),this._chatBotService.chatList.push(s),this._chatBotService.chatListStatus=!0}),s.msg==""&&(s.name="Lo sentimos  ya nos encontramos solucionando el problema 2",s.id="0",s.value="Lo sentimos  ya nos encontramos solucionando el problema",s.isBot=!0,s.isProduct=!1,this._chatBotService.chatList.push(s),this._chatBotService.chatListStatus=!0),this.scrollToBottom("scrollContainer"),this.question=""})}}GetSplitResponse(n){return n.split(" ")}SelctProduct(n){var i="";n.split(" ").forEach(r=>{r!=""&&(i+=r+(r!=""?"-":""))}),this.Route("select-product/"+n)}startRecording(){this.question="",this.statusSpeech=!0,this._SpeechRecognition.start(),this._cdRef.detectChanges()}stoptRecording(){this.statusSpeech=!1,this._SpeechRecognition.stop()}initVoiceInput(){this._SpeechRecognition.init("es-ES").subscribe(()=>{}),this._SpeechRecognition.speechInput().subscribe(n=>{this.statusSpeech?this.question=n:this.QuestionMsg(),this._cdRef.detectChanges()})}Route(n){this.route.navigate([n])}scrollToBottom(n,i=0){return y(this,null,function*(){yield new Promise(h=>setTimeout(h,600));let r=document.getElementById(n);r&&r.scrollTo({top:i==0?r.scrollHeight+r.scrollHeight:i,behavior:"smooth"})})}CancelPrediction(){this._chatBotService.chatListStatus=!0}};o.\u0275fac=function(i){return new(i||o)(m(Q),m(q),m($),m(X),m(K),m(z),m(W),m(V),m(J),m(D))},o.\u0275cmp=T({type:o,selectors:[["app-chat-bot-msg"]],viewQuery:function(i,r){if(i&1&&j(nt,5),i&2){let h;F(h=L())&&(r.scrollContainer=h.first)}},standalone:!0,features:[R],decls:13,vars:4,consts:[[1,"chat-div"],["id","scrollContainer",1,"scroll-chat"],["class","loading-pointer","src","assets/loading_pointer.gif"],["class","container-mic"],[1,"input-text"],[1,"div-container-text"],[1,"div-input-text"],["class","btn-sent"],["class","item-response msg-user"],[1,"item-response","msg-user"],[1,"justify","text-detail"],[1,"item-response","msg-bot"],["class","img-chat",3,"src"],[1,"link",3,"click"],[1,"img-chat",3,"src"],["src","assets/loading_pointer.gif",1,"loading-pointer"],[1,"container-mic"],[1,"mic-img"],[1,"bi","bi-mic-fill"],[1,"text",3,"ngModel","keyup.enter","ngModelChange"],[1,"mic-input-msg"],["class","btn-mic"],[1,"btn-mic",3,"click"],[1,"bi","bi-mic"],[1,"bi","bi-stop-fill"],["disabled","",1,"text",3,"value","keyup.enter"],[1,"btn-sent",3,"click"],[1,"bi","bi-send-fill"],[1,"bi","bi-x-circle-fill"]],template:function(i,r){i&1&&(l(0,"div",0)(1,"div",1),M(2,ut,2,1,null,null,ot),u(4,ht,1,0,"img",2),c()(),u(5,gt,3,0,"div",3),l(6,"div",4)(7,"div",5)(8,"div",6),u(9,Ct,4,3)(10,vt,1,1),c(),u(11,bt,2,0,"button",7)(12,Mt,2,0),c()()),i&2&&(_(2),w(r._chatBotService.chatList),_(2),p(4,r._chatBotService.chatListStatus?-1:4),_(1),p(5,r.statusSpeech?5:-1),_(4),p(9,r._chatBotService.chatListStatus?9:10),_(2),p(11,r._chatBotService.chatListStatus?11:12))},dependencies:[N,A,H,U],styles:[".chat-div[_ngcontent-%COMP%]{height:70vh;width:100vw;display:flex;flex-direction:column;justify-content:end;align-items:stretch;overflow:hidden}.item-response[_ngcontent-%COMP%]{width:100%;height:auto}.item-response[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:5px;border-radius:5px;max-width:70%;color:#fff;text-shadow:0px 1px black}.msg-bot[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#233a1f;border-radius:0 10px 10px}.msg-user[_ngcontent-%COMP%]{display:flex;justify-content:end}.msg-user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#0f9600;border-radius:10px 0 10px 10px}.div-input-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:row;border-radius:5px;background-color:#696969;padding:4px}@media (max-width: 468px){.div-input-text[_ngcontent-%COMP%]{width:70%}}.btn-mic[_ngcontent-%COMP%]{border:none;border-radius:0 5px 5px 0;background-color:#fff;box-shadow:0 0 5px #000,0 0 3px #000 inset;height:46px;width:50px}.input-text[_ngcontent-%COMP%]{background-color:#fff;width:100%;height:100px;position:sticky;bottom:0;z-index:1000;padding:5px;border-radius:5px 5px 0 0;box-shadow:0 0 5px #000;position:fixed}.div-container-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;justify-content:space-around;min-width:70%}.text[_ngcontent-%COMP%]{width:500px;height:40px;border-radius:5px 0 0 5px;resize:none}@media (max-width: 468px){.text[_ngcontent-%COMP%]{width:70%;height:40px;border-radius:5px 0 0 5px}}.btn-sent[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:10px;border:none;box-shadow:0 0 5px #000;background-color:#717171;color:#fff;font-size:20px}.btn-sent[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0px 1px 2px black)}.scroll-chat[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column;row-gap:20px;padding:8px;overflow:hidden;overflow-y:auto;align-items:center}.link[_ngcontent-%COMP%]{color:#fff;cursor:pointer}.img-chat[_ngcontent-%COMP%]{height:60px;width:auto;border-radius:5px;box-shadow:0 0 5px #000;text-decoration:underline}.loading-pointer[_ngcontent-%COMP%]{height:30px;width:32px;background-color:#ff4500;padding:5px;border-radius:10px;box-shadow:0 0 5px #000 inset}.container-mic[_ngcontent-%COMP%]{width:100vw;height:80px;position:fixed;bottom:150px;display:flex;justify-content:center;align-items:center}.mic-img[_ngcontent-%COMP%]{height:80px;width:80px;padding:5px;background-color:#8080805e;border-radius:100%;border:none;box-shadow:0 0 5px #000;animation:_ngcontent-%COMP%_micGlow 1.5s infinite alternate}.mic-img[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;width:80px;background-color:gray;border-radius:100%;padding:10px}@keyframes _ngcontent-%COMP%_micGlow{0%{opacity:.9;background-color:#0000003d;transform:scale(1)}to{opacity:1;transform:scale(1.1)}}"]});let t=o;return t})();export{Gt as ChatBotMsg};
