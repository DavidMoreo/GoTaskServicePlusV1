import{a as R}from"./chunk-V7QJ5PZL.js";import"./chunk-5WFT5PRI.js";import{a as B}from"./chunk-W3XRPWO3.js";import{a as $}from"./chunk-JSEALS6B.js";import"./chunk-ROSI6QSI.js";import{a as k}from"./chunk-VYAYXPXE.js";import{a as V}from"./chunk-OMG2A7U2.js";import"./chunk-VLMSGL5J.js";import{b as A}from"./chunk-DY7UBFIR.js";import"./chunk-MV2P2U5R.js";import{$ as M,A as d,B as p,Ca as _,E as P,H as C,I as x,Ia as N,K as L,L as I,M as l,N as a,O as v,P as U,Q as O,R as m,Va as T,X as h,Z as j,i as g,ka as E,oa as H,p as S,r as f,s as b,u as y,v as G,x as w,xa as F}from"./chunk-EYTT7SII.js";var z=(()=>{let e=class e{constructor(t,i,r){this.http=t,this.Configservice=i,this._Concept=r,this._statusList=new Array,this.loadingStatus=!1,this._Configservice=i,this._http=t}UpdateProduct(t){var i="Product/UpdateProduct",r=this._http.post(this._Configservice.GetHostApi()+i,t);return r.subscribe(o=>{var s=o.data;this.listProduct.forEach(c=>{s.id==c.id&&(c.isPublic=s.isPublic,c.status=s.status),this.SetLoading(!1)})}),r}GetAllProduct(t,i,r){this.listProduct=new Array;var o=this._http.get(this._Configservice.GetHostApi()+`Product/GetProductByProject?filter=${t}&type=${i}&page=${r}`);return o.subscribe(s=>{this.listProduct=s.data,this.listProduct==null&&(this.listProduct=new Array)}),o}GetProductById(t){var i=this._http.get(this._Configservice.GetHostApi()+`Product/GetProductById?id=${t}`);return i}GetListStatusConcept(){var t=N.StatusProductConcept(),i=this._Concept.GetListByName("ALL",t,0);i.subscribe(r=>{this._statusList=r.data})}GetUrl(t){return this._Configservice.GetUrlImg(t,"PHONE")}SetLoading(t){this.loadingStatus=t}};e.\u0275fac=function(i){return new(i||e)(f(H),f(_),f(k))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var K=(n,e)=>e.name;function Q(n,e){n&1&&(l(0,"div",11)(1,"div",12),h(2,"ON"),a()())}function W(n,e){n&1&&(l(0,"div",13)(1,"div",12),h(2,"OFF"),a()())}function X(n,e){if(n&1){let u=U();l(0,"div",9),O("click",function(){y(u);let i=m().$implicit,r=m();return G(r.Edit(i.id))}),C(1,Q,3,0,"div",10)(2,W,3,0),a()}if(n&2){let u=m().$implicit;d(1),x(1,u.isPublic?1:2)}}function Y(n,e){n&1&&v(0,"app-common-loading-partial")}function Z(n,e){if(n&1&&(l(0,"div",4)(1,"div",5),v(2,"img",6),a(),l(3,"div",7),h(4),a(),C(5,X,3,1,"div",8)(6,Y,1,0),a()),n&2){let u=e.$implicit,t=m();d(2),P("src",t.GetUrl(u.firsImg),w),d(2),j(" ",u.name," "),d(1),x(5,t.GetLoading()?6:5)}}var vt=(()=>{let e=class e{constructor(t,i,r,o,s){this.route=t,this._Permission=r,this._util=o,this.counHttp=0,this.limitHttp=3,this.filter="all",this.type="all",this.page=0,this._Configservice=i,this._ProductService=s}ngOnInit(){var t=this._Permission.ValidationLogin("app-vendor-active-product");t&&this.loadPoduct()}loadPoduct(){return g(this,null,function*(){this.ReloadHttp(),this._ProductService.GetListStatusConcept(),this._ProductService.GetAllProduct(this.filter,this.type,this.page)})}Edit(t){this._ProductService.SetLoading(!0),this._ProductService.GetProductById(t).subscribe(i=>{i.status&&this.StastusProduct(i.data)})}StastusProduct(t){var i=this._ProductService._statusList.find(c=>c.value=="private"),r=this._util.GetNameConcept(i?.name,i?.value,i?.id),o=this._ProductService._statusList.find(c=>c.value=="public"),s=this._util.GetNameConcept(o?.name,o?.value,o?.id);t.isPublic?t.status=r:t.status=s,t.isPublic=t?.status.value=="public",this._ProductService.UpdateProduct(t)}ProductNotNull(t){return!(t==null||t==null)}OnselectStatus(t){var i=t.target.value,r=this._ProductService._statusList.find(o=>o.id==i);i!=null&&i!="0"&&(this._ProductService.product.status=this._util.GetNameConcept(r?.name,r?.value,r?.id),this._ProductService.product.isPublic=r?.value=="public")}GetPrduct(){return this._ProductService.listProduct}GetListNull(){return this.GetPrduct()==null||this.GetPrduct().length<=0}GetLoading(){return this._ProductService.loadingStatus}ReloadHttp(){return g(this,null,function*(){if(this.counHttp++,this.counHttp<=this.limitHttp)var t=setInterval(()=>{this.GetListNull()?(clearInterval(t),this.loadPoduct()):clearInterval(t)},1e4)})}GetUrl(t){return this._Configservice.GetUrlImgItem(t,"PHONE")}languageTraslate(t){return t}};e.\u0275fac=function(i){return new(i||e)(p(F),p(_),p($),p(V),p(z))},e.\u0275cmp=b({type:e,selectors:[["app-vendor-active-product"]],standalone:!0,features:[M],decls:6,vars:1,consts:[["page","app-vendor-active-product"],[1,"conatiner-product"],[1,"margin-top"],[3,"active"],[1,"product"],[1,"div-img"],["loading","lazy",1,"ico",3,"src"],[1,"div-item"],["class","div-btn"],[1,"div-btn",3,"click"],["class","on"],[1,"on"],[1,"btn"],[1,"off"],["class","product"]],template:function(i,r){i&1&&(l(0,"app-permission",0)(1,"div",1),L(2,Z,7,3,"div",14,K),a(),v(4,"div",2)(5,"app-common-loading",3),a()),i&2&&(d(2),I(r.GetPrduct()),d(3),P("active",r.GetListNull()))},dependencies:[A,B,T,E,R],styles:[".conatiner-product[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.product[_ngcontent-%COMP%]{display:flex;height:80px;background-color:#7fffd4;border-radius:5px;width:300px;justify-content:space-between;align-items:center;overflow:hidden}.div-item[_ngcontent-%COMP%]{height:100%;width:90%}.div-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;max-width:100px}.margin-top[_ngcontent-%COMP%]{height:200px}.on[_ngcontent-%COMP%]{display:flex;background-color:gray;height:80px;width:30px;padding:2px;background-color:green;box-shadow:0 0 3px #000 inset}.off[_ngcontent-%COMP%]{display:flex;height:80px;padding:2px;width:30px;background-color:gray;align-items:end;box-shadow:0 0 3px #000 inset}.btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;box-shadow:0 0 5px #000,0 0 5px #000 inset;background-color:#fff;height:30px;width:100%;margin-top:2px;margin-bottom:2px;cursor:pointer}"]});let n=e;return n})();export{vt as VendorUpdateProduct};
