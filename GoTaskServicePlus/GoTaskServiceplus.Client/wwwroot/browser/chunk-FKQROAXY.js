import{a as A}from"./chunk-3WW5P42I.js";import{b as ee,c as te,d as ie}from"./chunk-5WFT5PRI.js";import{a as j,b as re}from"./chunk-4MKFL3OM.js";import{a as Z}from"./chunk-W3XRPWO3.js";import{a as Y}from"./chunk-JSEALS6B.js";import"./chunk-ROSI6QSI.js";import"./chunk-VYAYXPXE.js";import{a as z}from"./chunk-OMG2A7U2.js";import"./chunk-VLMSGL5J.js";import"./chunk-DY7UBFIR.js";import"./chunk-MV2P2U5R.js";import{$ as H,A as o,B as C,C as N,Ca as E,E as f,H as S,I as g,Ja as U,K as x,L as w,M as a,N as c,Na as q,O,P,Pa as J,Q as m,Qa as K,R as _,Sa as Q,Ta as W,U as M,Va as X,X as d,Y as T,Z as u,_ as F,aa as y,i as b,ia as $,ka as L,la as V,oa as B,p as R,r as k,s as D,u as v,v as h}from"./chunk-EYTT7SII.js";var ne=(()=>{let l=class l{constructor(e,i){this.http=e,this.host=i,this.listRolUser=new Array,this.user=new j,this.rowSelection="",this._host=i,this._http=e}Saved(e){let i=new V().set("Content-Type","application/json");var t=this._http.post(this._host.GetHostApi()+"User/SaveUser",e);return t}Upbdate(e){let i=new V().set("Content-Type","application/json");var t=this._http.post(this._host.GetHostApi()+"User/UpdateUser",e);return t}Delete(e){var i=this._http.delete(this._host.GetHostApi()+"Project/DeleteCompany?id="+e);return i}GetAll(e,i){this._listUser=new Array;var t=this._http.get(this._host.GetHostApi()+`Project/GetAllProject?filter=${e}&page=${i}`);return t.subscribe(s=>{this._listUser=s.data}),t}GetById(e){var i=this._http.get(this._host.GetHostApi()+`User/GetUserById?id=${e}`);return i}GetRolsByProject(e,i){var t=this._http.get(this._host.GetHostApi()+`Rol/GetAllRol?page=${i}&filter=${e}`);return t.subscribe(s=>{console.log("Geyt Rol ",s.data),this.listRolUser=s.data,console.log("Geyt Rol 2",this.listRolUser)}),t}GetAllByIdProject(e,i){var t=this._http.get(this._host.GetHostApi()+`User/GetAllUserByProject?page=${i}`);return t}GetAllCompany(e,i){var t=this._http.get(this._host.GetHostApi()+`Company/GetAllCompany?filter=${e}&page=${i}`);return t}GetAllProject(e,i){var t=this._http.get(this._host.GetHostApi()+`Project/GetAllProject?filter=${e}&page=${i}`);return t}};l.\u0275fac=function(i){return new(i||l)(k(B),k(E))},l.\u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"});let n=l;return n})();var I=(n,l)=>l.id;function ce(n,l){if(n&1&&(a(0,"option",8),d(1),c()),n&2){let r=_(2);o(1),u(" ",r.languageTraslate("Seleccionar"),"")}}function de(n,l){if(n&1&&(a(0,"option",8),d(1),c()),n&2){let r=_(2);o(1),u(" ",r._UserService.user.conceptCompany.name,"")}}function _e(n,l){if(n&1&&(a(0,"option",13),d(1),c()),n&2){let r=l.$implicit;M("value",r.id),o(1),T(r.name)}}function pe(n,l){if(n&1&&(S(0,ce,2,1,"option",8)(1,de,2,1),x(2,_e,2,2,"option",13,I)),n&2){let r=_();g(0,r._UserService.user.id=="00000000-0000-0000-0000-000000000000"?0:1),o(2),w(r._UserService._listCompany)}}function ue(n,l){if(n&1&&(a(0,"option",8),d(1),c()),n&2){let r=_(2);o(1),u(" ",r.languageTraslate("Seleccionar"),"")}}function me(n,l){if(n&1&&(a(0,"option",8),d(1),c()),n&2){let r=_(2);o(1),u(" ",r._UserService.user.conceptProject.name,"")}}function ve(n,l){if(n&1&&(a(0,"option",13),d(1),c()),n&2){let r=l.$implicit;M("value",r.id),o(1),T(r.name)}}function he(n,l){if(n&1&&(S(0,ue,2,1,"option",8)(1,me,2,1),x(2,ve,2,2,"option",13,I)),n&2){let r=_();g(0,r._UserService.user.id=="00000000-0000-0000-0000-000000000000"?0:1),o(2),w(r._UserService._listProject)}}function fe(n,l){if(n&1&&(a(0,"option",13),d(1),c()),n&2){let r=l.$implicit;M("value",r.id),o(1),F("",r.name," - ",r.id,"")}}function Ue(n,l){if(n&1){let r=P();a(0,"div",14)(1,"p"),d(2),c(),a(3,"button",6),m("click",function(){let t=v(r).$implicit,s=_();return h(s.DeleteRol(t.id))}),d(4,"Eliminar"),c()()}if(n&2){let r=l.$implicit;o(2),T(r.name)}}function Se(n,l){if(n&1){let r=P();a(0,"button",6),m("click",function(){v(r);let i=_();return h(i.SaveUser())}),O(1,"i",15),c()}}function ge(n,l){if(n&1){let r=P();a(0,"app-common-menu-grid",16),m("Edit",function(i){v(r);let t=_();return h(t.Edit(i))})("Delete",function(i){v(r);let t=_();return h(t.Delete(i))})("Clone",function(i){v(r);let t=_();return h(t.Clone(i))})("ClearData",function(i){v(r);let t=_();return h(t.ClearData(i))}),c()}if(n&2){let r=_();f("item",r._UserService.rowSelection)}}var G=n=>({"row-select":n});function Ce(n,l){if(n&1){let r=P();a(0,"div",17),m("click",function(){let t=v(r).$implicit,s=_(2);return h(s.Selection(t.id))}),d(1),c(),a(2,"div",17),m("click",function(){let t=v(r).$implicit,s=_(2);return h(s.Selection(t.id))}),d(3),c(),a(4,"div",17),m("click",function(){let t=v(r).$implicit,s=_(2);return h(s.Selection(t.id))}),d(5),c(),a(6,"div",17),m("click",function(){let t=v(r).$implicit,s=_(2);return h(s.Selection(t.id))}),d(7),c(),a(8,"div",17),m("click",function(){let t=v(r).$implicit,s=_(2);return h(s.Selection(t.id))}),d(9),c()}if(n&2){let r=l.$implicit,e=_(2);f("ngClass",y(10,G,e.NullProductSelectId(r.id))),o(1),u(" ",r.name," "),o(1),f("ngClass",y(12,G,e.NullProductSelectId(r.id))),o(1),u(" ",r.email," "),o(1),f("ngClass",y(14,G,e.NullProductSelectId(r.id))),o(1),u(" ",r.conceptCompany.name," "),o(1),f("ngClass",y(16,G,e.NullProductSelectId(r.id))),o(1),u(" ",r.conceptProject.name," "),o(1),f("ngClass",y(18,G,e.NullProductSelectId(r.id))),o(1),u(" ",r.rolUserActive.name," ")}}function xe(n,l){if(n&1&&x(0,Ce,10,20,null,null,I),n&2){let r=_();w(r._UserService._listUser)}}var Oe=(()=>{let l=class l{constructor(e,i,t,s,p,se){this._GridCustom=p,this._util=se,this._configservice=e,this._cdRef=i,this._UserService=t,this._Permission=s}ngOnInit(){var e=this._Permission.ValidationLogin("admin-user");e&&(this.LoadHeaderGrid(),this.LoadData(),this.LoadCompnys())}LoadCompnys(){return b(this,null,function*(){this.GetAllByIdProject("all"),this.GetAllCompany("all"),this.GetAllProject("all"),this.GetAllRol("all")})}Delete(e){return b(this,null,function*(){var i=yield this._UserService.Delete(e).subscribe(t=>{t.status&&(this.DeleteList(e),alert("Eliminado"))})})}Edit(e){this._UserService.GetById(this._UserService.rowSelection).subscribe(i=>{console.log(i.data),this._UserService.user=i.data})}Clone(e){alert(e),this._UserService.GetById(this._UserService.rowSelection).subscribe(i=>{console.log(i.data),this._UserService.user=i.data,this._UserService.user.id=this._util.GuidEmpty(),alert(this._UserService.user.id)})}ClearData(e){this._UserService.rowSelection="",this._UserService.user=new j,this._UserService.user.id=this._util.GuidEmpty()}SaveUser(){return b(this,null,function*(){this.ValidateConcept(),this._UserService.user.id=="00000000-0000-0000-0000-000000000000"?yield this._UserService.Saved(this._UserService.user).subscribe(e=>{e.status?(this._UserService._listUser=this._UserService._listUser.filter(i=>i.id!=this._UserService.user.id),this._UserService._listUser.push(e.data),this._cdRef.detectChanges(),alert("guardado")):alert("No guardado")}):yield this._UserService.Upbdate(this._UserService.user).subscribe(e=>{e.status?(this._UserService._listUser=this._UserService._listUser.filter(i=>i.id!=this._UserService.user.id),this._UserService._listUser.push(e.data),this._cdRef.detectChanges(),alert("Actualizado")):alert("No Actualizado")})})}GetAllByIdProject(e){this._UserService._listUser=new Array,this._UserService.GetAllByIdProject(e,0).subscribe(i=>{this._UserService._listUser=i.data})}GetAllCompany(e){this._UserService._listCompany=new Array,this._UserService.GetAllCompany(e,0).subscribe(i=>{this._UserService._listCompany=i.data})}GetAllProject(e){this._UserService._listProject=new Array,this._UserService.GetAllProject(e,0).subscribe(i=>{this._UserService._listProject=i.data})}GetAllRol(e){this._UserService.listRolUser=new Array,this._UserService.GetRolsByProject(e,0).subscribe(i=>{this._UserService.listRolUser=i.data})}DeleteList(e){let i=this._UserService._listUser.findIndex(t=>t.id===e);i!==-1&&this._UserService._listUser.splice(i,1)}onSelectRol(e){var i=e.target.value,t=this._UserService.listRolUser.find(s=>s.id==i);t!=null&&(this._UserService.user.rolUser.find(s=>s.id==i)==null&&this._UserService.user.rolUser.push(t),(this._UserService.user.rolUserActive!=null||this._UserService.user.rolUserActive==null)&&(this._UserService.user.rolUserActive=t))}DeleteRol(e){this._UserService.user.rolUser=this._UserService.user.rolUser.filter(i=>i.id!=e)}onSelectChangeCompany(e){var i=e.target.value,t=this._UserService._listCompany.find(p=>p.id==i);if(t!=null){var s=new U;s.id=t.id,s.name=t.name,this._UserService.user.idCompany=s.id,this._UserService.user.conceptCompany=s}}onSelectChangeProject(e){var i=e.target.value,t=this._UserService._listProject.find(p=>p.id==i);if(t!=null){var s=new U;s.id=t.id,s.name=t.name,this._UserService.user.idProject=s.id,this._UserService.user.conceptProject=s}}changedInputName(e,i){this.LoadData()}LoadHeaderGrid(){return b(this,null,function*(){var e=new A;this._GridCustom.dataHeader=Array(),e.id="0",e.value="Nombre",this._GridCustom.dataHeader.push(e),e=new A,e.id="0",e.value="Correo",this._GridCustom.dataHeader.push(e),e=new A,e.id="0",e.value="Empresa",this._GridCustom.dataHeader.push(e),e=new A,e.id="0",e.value="Sucursal",this._GridCustom.dataHeader.push(e),e=new A,e.id="0",e.value="Rol",this._GridCustom.dataHeader.push(e)})}LoadData(){this._UserService.user==null&&(this._UserService.user=new j)}Selection(e){this._UserService.rowSelection="",this._UserService.rowSelection=e}languageTraslate(e){return e}ValidateConcept(){this._UserService.user.conceptCompany==null&&(this._UserService.user.conceptCompany=new U),this._UserService.user.conceptPrevious==null&&(this._UserService.user.conceptPrevious=new U),this._UserService.user.conceptProject==null&&(this._UserService.user.conceptProject=new U),this._UserService.user.code==null&&(this._UserService.user.code=""),this._UserService.user.imgUrl==null&&(this._UserService.user.imgUrl=""),this._UserService.user.rolUser==null&&(this._UserService.user.rolUser=new Array),this._UserService.user.rolUserActive==null&&(this._UserService.user.rolUserActive=new re),this._UserService.user.rolUserActive.conceptCompany==null&&(this._UserService.user.rolUserActive.conceptCompany=new U),this._UserService.user.rolUserActive.conceptPrevious==null&&(this._UserService.user.rolUserActive.conceptPrevious=new U),this._UserService.user.rolUserActive.conceptProject==null&&(this._UserService.user.rolUserActive.conceptProject=new U),this._UserService.user.password==null&&(this._UserService.user.password=""),this._UserService.user.keyPassword==null&&(this._UserService.user.keyPassword=""),this._UserService.user.mobileNumber==null&&(this._UserService.user.mobileNumber=""),this._UserService.user.listShoppingCart==null&&(this._UserService.user.listShoppingCart=new Array),this._UserService.user.listFavorites==null&&(this._UserService.user.listFavorites=new Array),this._UserService.user.listMyLikes==null&&(this._UserService.user.listMyLikes=new Array)}NullProductSelectId(e){if(this._UserService.rowSelection=="")return!1;if(e!="0"){if(this._UserService.rowSelection==e)return!0}else if(this._UserService.rowSelection!="")return!0;return!1}};l.\u0275fac=function(i){return new(i||l)(C(E),C(N),C(ne),C(Y),C(te),C(z))},l.\u0275cmp=D({type:l,selectors:[["app-admin-user"]],standalone:!0,features:[H],decls:35,vars:17,consts:[[1,"containe-concept"],[1,"container-input"],[1,"text-form"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","text","name","email",3,"ngModel","ngModelChange"],["type","text","name","nit",3,"ngModel","ngModelChange"],[3,"click"],[3,"change"],["value","0","selected",""],[1,"grid-container"],[1,"btn-scroll"],[3,"item"],["columns","5"],[3,"value"],[1,"item-rol"],[1,"bi","bi-floppy2-fill"],[3,"item","Edit","Delete","Clone","ClearData"],[1,"div-item",3,"ngClass","click"],["class","item-rol"]],template:function(i,t){i&1&&(a(0,"app-permission")(1,"div",0)(2,"div",1)(3,"p",2),d(4),a(5,"input",3),m("ngModelChange",function(p){return t._UserService.user.name=p}),c(),d(6),a(7,"input",3),m("ngModelChange",function(p){return t._UserService.user.password=p}),c(),d(8),a(9,"input",4),m("ngModelChange",function(p){return t._UserService.user.email=p}),c(),d(10),a(11,"input",5),m("ngModelChange",function(p){return t._UserService.user.mobileNumber=p}),c()(),a(12,"p",2),d(13),a(14,"select",6),m("click",function(p){return t.onSelectChangeCompany(p)}),S(15,pe,4,1),c()(),a(16,"p",2),d(17),a(18,"select",6),m("click",function(p){return t.onSelectChangeProject(p)}),S(19,he,4,1),c()()(),a(20,"p",2),d(21),a(22,"select",7),m("change",function(p){return t.onSelectRol(p)}),a(23,"option",8),d(24),c(),x(25,fe,2,3,"option",13,I),c()(),a(27,"div",9),x(28,Ue,5,1,"div",18,I),c(),a(30,"div",10),S(31,Se,2,0,"button"),c()(),S(32,ge,1,1,"app-common-menu-grid",11),a(33,"app-common-custom-grid",12),S(34,xe,2,0),c()()),i&2&&(o(4),u(" ",t.languageTraslate("Nombre")," "),o(1),f("ngModel",t._UserService.user.name),o(1),u(" ",t.languageTraslate("Clave")," "),o(1),f("ngModel",t._UserService.user.password),o(1),u(" ",t.languageTraslate("Correo")," "),o(1),f("ngModel",t._UserService.user.email),o(1),u(" ",t.languageTraslate("Nit")," "),o(1),f("ngModel",t._UserService.user.mobileNumber),o(2),u(" ",t.languageTraslate("Empresa")," "),o(2),g(15,t._UserService._listCompany!=null?15:-1),o(2),u(" ",t.languageTraslate("Sucursal")," "),o(2),g(19,t._UserService._listProject!=null?19:-1),o(2),u(" ",t.languageTraslate("Rol")," "),o(3),u(" ",t.languageTraslate("Seleccionar"),""),o(1),w(t._UserService.listRolUser),o(3),w(t._UserService.user.rolUser),o(3),g(31,31),o(1),g(32,t.NullProductSelectId("0")?32:-1),o(2),g(34,t._UserService._listUser!=null?34:-1))},dependencies:[X,Q,W,q,J,K,L,$,Z,ie,ee],styles:[".scroll-menu[_ngcontent-%COMP%]{width:100vw;overflow:hidden}.containe-concept-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px;row-gap:5px;column-gap:5px;background-color:#000;width:100%;overflow:auto}.containe-concept-menu[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{min-width:100px;padding:5px;border-radius:5px;background-color:#000;color:#fff}.active[_ngcontent-%COMP%]{border:1px solid white;box-shadow:-1px 1px 2px #fff,inset 0 0 8px #fff}.disable[_ngcontent-%COMP%]{border:none;box-shadow:0 0 2px #fff}.btn-scroll[_ngcontent-%COMP%]{display:flex;justify-content:end;column-gap:10px;align-items:center;background-color:#ff4500;box-shadow:0 0 5px #000;padding:5px;border-radius:5px}.btn-scroll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;background-color:#000;box-shadow:0 0 5px #000,inset 0 0 5px #fff;color:#fff;padding:2px;height:45px;min-width:50px;display:flex;justify-content:center;align-items:center}.btn-scroll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}.scroll[_ngcontent-%COMP%]{display:flex;width:99%;padding:5px;background-color:#0ff;height:200px;overflow:hidden;justify-content:start}.container-concep[_ngcontent-%COMP%]{display:grid;row-gap:1px;grid-template-columns:repeat(4,1fr);background-color:red;grid-template-rows:min-content;width:100%;align-content:start;overflow-y:auto}.div-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#000;border:1px solid white;height:30px;color:#fff}.div-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:gray;border:1px solid white;height:30px;color:#fff;position:relative}.row-select[_ngcontent-%COMP%]{background-color:green}.edit-visible[_ngcontent-%COMP%]{top:5px;right:0;position:absolute}.grid-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding:5px;flex-wrap:wrap}.item-rol[_ngcontent-%COMP%]{background-color:#00f;border-radius:5px;width:auto;display:flex;row-gap:5px;column-gap:10px;padding:5px;color:#f0f8ff}"]});let n=l;return n})();export{Oe as AdminteUser};
