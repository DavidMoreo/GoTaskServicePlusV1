import{a as P}from"./chunk-DY7UBFIR.js";import{Ca as c,Ka as f,i as d,la as u,oa as h,p as n,r as a}from"./chunk-EYTT7SII.js";var v=(()=>{let s=class s{constructor(t,i,r){this.http=t,this.host=i,this.isBuyProduct=!1,this.listGuid=new Array,this.counHttp=0,this.limitHttp=10,this._host=i,this._http=t,this._loading=r}GetAllProduct(t,i){this.ReloadHttp();let r=new u({"Content-Type":"application/json"});var e=this._http.post(this._host.GetHostApi()+`Product/GetListFavorite?page=${i}`,t,{headers:r});return e.subscribe({next:o=>{this._listProduct=o.data,this._loading.Loading(!1)},error:o=>{this._loading.Loading(!1)}}),e}GetAllCartStorage(){this._listProductCart=new Array;var t=window.localStorage.getItem("cartBuy");t!=null&&t!=null&&t!=""&&(this._listProductCart=JSON.parse(t)),this._listProductCart==null&&(this._listProductCart=new Array)}Clear(){window.localStorage.removeItem("cartBuy"),this.GetAllCartStorage()}AddProductCart(t,i=0){var r=new f;r.id=t.id,r.name=t.name,r.quantity=i!=0?i:1;var e=this.GetCartById(t.id),o=e.find(p=>p.id==t.id);(e==null||e==null||o==null)&&(this._listProductCart.push(r),window.localStorage.setItem("cartBuy",JSON.stringify(this._listProductCart)))}RemoveCartById(t){this.GetAllCartStorage(),this._listProductCart=this._listProductCart.filter(i=>i.id!=t),window.localStorage.setItem("cartBuy",JSON.stringify(this._listProductCart)),this._listProduct=this._listProduct.filter(i=>i.id!=t),this.listGuid=this.listGuid.filter(i=>i!=t)}CarGuid(){this._listProductString=new Array,this._listProductCart.forEach(t=>{this._listProductString.push(t.id)}),this.GetAllProduct(this._listProductString,0)}GetCartById(t){this.GetAllCartStorage();var i=this._listProductCart.find(r=>r.id==t);return this._listProductCart}BuyProduct(t){this.isBuyProduct=!0}GetListNull(){return(this._listProduct==null||this._listProduct==null||this._listProduct.length<=0)&&this.listGuid.length>0}ReloadHttp(){return d(this,null,function*(){if(this.counHttp++,this.counHttp<=this.limitHttp)var t=setInterval(()=>{clearInterval(t),this.GetListNull()&&this.GetAllProduct(this.listGuid,0)},9e3)})}};s.\u0275fac=function(i){return new(i||s)(a(h),a(c),a(P))},s.\u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"});let l=s;return l})();export{v as a};
