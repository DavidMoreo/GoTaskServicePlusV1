import{a as R}from"./chunk-3WW5P42I.js";import{c as A,d as Z}from"./chunk-5WFT5PRI.js";import{b as V,c as I}from"./chunk-4MKFL3OM.js";import{a as Y}from"./chunk-W3XRPWO3.js";import{a as X}from"./chunk-JSEALS6B.js";import"./chunk-ROSI6QSI.js";import{a as N}from"./chunk-VYAYXPXE.js";import{a as L}from"./chunk-OMG2A7U2.js";import"./chunk-VLMSGL5J.js";import"./chunk-DY7UBFIR.js";import"./chunk-MV2P2U5R.js";import{$ as j,A as c,B as v,C as F,Ca as y,E as b,H as g,I as x,K as P,L as E,M as r,N as l,Na as z,O as h,P as p,Pa as q,Q as d,Qa as J,R as a,Sa as K,Ta as Q,U as O,Va as W,X as u,Y as B,Z as C,aa as S,i as U,ia as $,ka as D,oa as H,p as M,r as T,s as G,u as _,v as m}from"./chunk-EYTT7SII.js";var ee=(()=>{let s=class s{constructor(e,t,n){this.http=e,this.host=t,this._GridCustom=n,this.rol=new V,this._host=t,this._http=e}GetRolById(e){var t=this._http.get(this._host.GetHostApi()+`Rol/GetRolById?id=${e}`);return t.subscribe(n=>{n.status&&(console.log(this.rol),this.rol=n.data)}),t}GetRolsByProject(e,t){var n=this._http.get(this._host.GetHostApi()+`Rol/GetAllRol?page=${t}&filter=${e}`);return n.subscribe(f=>{this.listRolUser=f.data,console.log("rol",this.listRolUser),this.LoadGrid()}),n}DeleteRol(e){var t=this._http.delete(this._host.GetHostApi()+`Rol/DeleteRol?id=${e}`);return t.subscribe(n=>{n.status?this.listRolUser=this.listRolUser.filter(f=>f.id!=e):alert("no eliminado"+n.msg)}),t}SaveRols(e){var t=this._http.post(this._host.GetHostApi()+"Rol/SaveRol",e);return t.subscribe(n=>{n.status?((this.listRolUser==null||this.listRolUser==null)&&(this.listRolUser=new Array),this.listRolUser.push(n.data),this.rol=new V):alert("No Guardado")}),t}UpdateRols(e){var t=this._http.post(this._host.GetHostApi()+"Rol/UpdateRol",e);return t.subscribe(n=>{n.status?(alert("actualizado"),this.rol=new V):alert("No actulizado")}),t}GetPagesPermission(){var e=this._http.get(this._host.GetHostApi()+"Pages/GetAllPages?filter=all&page=0");return e.subscribe(t=>{t.status&&(this.listPages=t.data)}),e}ClearRol(){this.rol=new V}LoadGrid(){var e=new R;this._GridCustom.data=Array(),this.listRolUser.forEach(t=>{e=new R,e.id=t.id,e.value=t.name,this._GridCustom.data.push(e),e=new R,e.id=t.id,e.value=t.name,this._GridCustom.data.push(e),e=new R,e.id=t.id,e.value=t.name,this._GridCustom.data.push(e),e=new R,e.id=t.id,e.value=t.name,this._GridCustom.data.push(e)})}};s.\u0275fac=function(t){return new(t||s)(T(H),T(y),T(A))},s.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();var se=(o,s)=>s.page;function ae(o,s){if(o&1&&(r(0,"option",8),u(1),l()),o&2){let i=a();c(1),C(" ",i.languageTraslate("Seleccionar"),"")}}function ce(o,s){if(o&1&&(r(0,"option",8),u(1),l()),o&2){let i=a();c(1),C(" ",i._Rol.rol.permissionByRoll.page,"")}}function de(o,s){if(o&1&&(r(0,"option",17),u(1),l()),o&2){let i=s.$implicit;O("value",i.page),c(1),B(i.name)}}function _e(o,s){if(o&1){let i=p();r(0,"i",18),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isCustomer"))}),l()}}function me(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isCustomer"))}),l()}}function pe(o,s){if(o&1){let i=p();r(0,"i",18),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isVendor"))}),l()}}function ue(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isVendor"))}),l()}}function Ce(o,s){if(o&1){let i=p();r(0,"i",18),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isMaker"))}),l()}}function fe(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isMaker"))}),l()}}function xe(o,s){if(o&1){let i=p();r(0,"i",18),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isAdmin"))}),l()}}function ge(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedRolType("isAdmin"))}),l()}}function he(o,s){if(o&1){let i=p();r(0,"i",18),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("save",!1))}),l()}}function Re(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("save",!0))}),l()}}function we(o,s){if(o&1){let i=p();r(0,"i",20),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("delete",!1))}),l()}}function ve(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("delete",!0))}),l()}}function be(o,s){if(o&1){let i=p();r(0,"i",20),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("read",!1))}),l()}}function Se(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("read",!0))}),l()}}function Ve(o,s){if(o&1){let i=p();r(0,"i",20),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("share",!1))}),l()}}function ke(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedIsPermission("share",!0))}),l()}}function Te(o,s){if(o&1){let i=p();r(0,"i",20),d("click",function(){_(i);let t=a();return m(t.ChangedIsPublic(!1))}),l()}}function ye(o,s){if(o&1){let i=p();r(0,"i",19),d("click",function(){_(i);let t=a();return m(t.ChangedIsPublic(!0))}),l()}}function Ae(o,s){if(o&1){let i=p();r(0,"button",21),d("click",function(){_(i);let t=a();return m(t.Saved())}),h(1,"i",22),l()}}var Ue=(o,s)=>s.name;function Pe(o,s){if(o&1){let i=p();r(0,"div",25)(1,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Edit(t.id))}),h(2,"i",26),l(),r(3,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Delete(t.id))}),h(4,"i",27),l()()}}function Ee(o,s){if(o&1){let i=p();r(0,"div",25)(1,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Edit(t.id))}),h(2,"i",26),l(),r(3,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Delete(t.id))}),h(4,"i",27),l()()}}function Ie(o,s){if(o&1){let i=p();r(0,"div",25)(1,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Edit(t.id))}),h(2,"i",26),l(),r(3,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Delete(t.id))}),h(4,"i",27),l()()}}function Me(o,s){if(o&1){let i=p();r(0,"div",25)(1,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Edit(t.id))}),h(2,"i",26),l(),r(3,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Delete(t.id))}),h(4,"i",27),l()()}}function Ge(o,s){if(o&1){let i=p();r(0,"div",25)(1,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Edit(t.id))}),h(2,"i",26),l(),r(3,"button",21),d("click",function(){_(i);let t=a().$implicit,n=a(2);return m(n.Delete(t.id))}),h(4,"i",27),l()()}}var k=o=>({"row-select":o});function Fe(o,s){if(o&1){let i=p();r(0,"div",23),d("click",function(){let n=_(i).$implicit,f=a(2);return m(f.Selection(n.id))}),u(1),g(2,Pe,5,0,"div",24),l(),r(3,"div",23),d("click",function(){let n=_(i).$implicit,f=a(2);return m(f.Selection(n.id))}),u(4),g(5,Ee,5,0,"div",24),l(),r(6,"div",23),d("click",function(){let n=_(i).$implicit,f=a(2);return m(f.Selection(n.id))}),u(7),g(8,Ie,5,0,"div",24),l(),r(9,"div",23),d("click",function(){let n=_(i).$implicit,f=a(2);return m(f.Selection(n.id))}),u(10),g(11,Me,5,0,"div",24),l(),r(12,"div",23),d("click",function(){let n=_(i).$implicit,f=a(2);return m(f.Selection(n.id))}),u(13),g(14,Ge,5,0,"div",24),l()}if(o&2){let i=s.$implicit,e=a(2);b("ngClass",S(15,k,e._rowSeletion==i.id)),c(1),C(" ",i.name," "),c(1),x(2,e._rowSeletion==i.id?2:-1),c(1),b("ngClass",S(17,k,e._rowSeletion==i.id)),c(1),C(" ",i.permissionByRoll.page," "),c(1),x(5,e._rowSeletion==i.id?5:-1),c(1),b("ngClass",S(19,k,e._rowSeletion==i.id)),c(1),C(" ",e.Getpermission(i)," "),c(1),x(8,e._rowSeletion==i.id?8:-1),c(1),b("ngClass",S(21,k,e._rowSeletion==i.id)),c(1),C(" ",e.IsPublic(i)," "),c(1),x(11,e._rowSeletion==i.id?11:-1),c(1),b("ngClass",S(23,k,e._rowSeletion==i.id)),c(1),C(" ",e.GetTypeRol(i)," "),c(1),x(14,e._rowSeletion==i.id?14:-1)}}function Oe(o,s){if(o&1&&P(0,Fe,15,25,null,null,Ue),o&2){let i=a();E(i._Rol.listRolUser)}}var nt=(()=>{let s=class s{constructor(e,t,n,f,w,te,ie){this._util=t,this._GridCustom=ie,this._tab="",this._configservice=e,this._http=n,this._cdRef=f,this._Rol=te,this._Permission=w}ngOnInit(){var e=this._Permission.ValidationLogin("admin-rol-user");e&&(this.InitialLoad(),this.LoadData(),this.LoadHeaderGrid())}LoadData(){return U(this,null,function*(){this._Rol.GetPagesPermission();var e=this._Rol.GetRolsByProject("all",0)})}Prueba(e){return e}Saved(){if(this._Rol.rol.id==this._util.GuidEmpty()){var e=this.Validate();e==""?this._Rol.SaveRols(this._Rol.rol):alert(e)}else this.UpdateRol()}UpdateRol(){var e=this.Validate();e==""?this._Rol.UpdateRols(this._Rol.rol):alert(e)}Edit(e){e!=""&&this._Rol.GetRolById(e)}Delete(e){e!=""&&this._Rol.DeleteRol(e)}onSelectChangePage(e){this.InitialLoad();var t=e.target.value;this._Rol.rol.permissionByRoll.page=t}ChangedIsPermission(e,t){this.InitialLoad(),e=="delete"&&(this._Rol.rol.permissionByRoll.delete=t),e=="read"&&(this._Rol.rol.permissionByRoll.read=t),e=="write"&&(this._Rol.rol.permissionByRoll.write=t),e=="share"&&(this._Rol.rol.permissionByRoll.share=t),e=="save"&&(this._Rol.rol.permissionByRoll.save=t),this._cdRef.detectChanges()}ChangedRolType(e){this.InitialLoad(),this._Rol.rol.isCustomer=!1,this._Rol.rol.isVendor=!1,this._Rol.rol.isMaker=!1,this._Rol.rol.isAdmin=!1,e=="isCustomer"&&(this._Rol.rol.isCustomer=!0),e=="isVendor"&&(this._Rol.rol.isVendor=!0),e=="isMaker"&&(this._Rol.rol.isMaker=!0),e=="isAdmin"&&(this._Rol.rol.isAdmin=!0),this._cdRef.detectChanges()}LoadHeaderGrid(){return U(this,null,function*(){var e=new R;this._GridCustom.dataHeader=Array(),e.id="0",e.value="Nombre",this._GridCustom.dataHeader.push(e),e=new R,e.id="0",e.value="Pagina",this._GridCustom.dataHeader.push(e),e=new R,e.id="0",e.value="Permiso",this._GridCustom.dataHeader.push(e),e=new R,e.id="0",e.value="Es publico",this._GridCustom.dataHeader.push(e),e=new R,e.id="0",e.value="Tipo de rol",this._GridCustom.dataHeader.push(e)})}changedInputName(e){var t=e.target.value;this._Rol.rol.code=this._Rol.rol.name}ChangedIsPublic(e){this._Rol.rol.isPublic=e,this._cdRef.detectChanges()}GetTypeRol(e){return e.isCustomer?"Cliente":e.isVendor?"Vendedor":e.isMaker?"Fabricante":e.isAdmin?"Administrador":""}Getpermission(e){var t="";return e.permissionByRoll.read&&(t+="Leer,"),e.permissionByRoll.write&&(t+="Escribir,"),e.permissionByRoll.save&&(t+="Guardar,"),e.permissionByRoll.delete&&(t+="Eliminar,"),e.permissionByRoll.share&&(t+="Compartir,"),t}IsPublic(e){return e.isPublic?"Publico":"Privado"}Selection(e){this._rowSeletion=e,this._cdRef.detectChanges()}languageTraslate(e){return e}Validate(){var e="";return this._Rol.rol.name==null&&(e="nombre requerido"),this._Rol.rol.permissionByRoll==null&&(e="Permisos requeridos"),this._Rol.rol.permissionByRoll==null&&(e="Permisos requeridos"),!this._Rol.rol.isCustomer&&!this._Rol.rol.isVendor&&!this._Rol.rol.isMaker&&!this._Rol.rol.isAdmin&&(e="Tipo de rol requeridos"),e}InitialLoad(){this._Rol.rol.permissionByRoll==null&&(this._Rol.rol.permissionByRoll=new I),this._Rol.rol.permissionByRoll==null&&(this._Rol.rol.permissionByRoll=new I),this._Rol.listPages==null&&(this._Rol.listPages=new Array),this._Rol.listPages==null&&(this._Rol.listPages=new Array)}ClerRol(){this._Rol.ClearRol()}};s.\u0275fac=function(t){return new(t||s)(v(y),v(L),v(N),v(F),v(X),v(ee),v(A))},s.\u0275cmp=G({type:s,selectors:[["app-admin-rol-user"]],standalone:!0,features:[j],decls:68,vars:27,consts:[[1,"containe-concept"],[1,"concept-item"],[1,"container-input"],[1,"text-form"],["type","text","name","name",1,"uppercase",3,"ngModel","change","ngModelChange"],["name",""],["type","text","name","code",1,"uppercase",3,"ngModel","ngModelChange"],["name","Pages",3,"change"],["value","0","selected",""],[1,"permission-mode"],[1,"btn1","ico"],["class"," ico bi bi-toggle-on"],[1,"ico","btn1"],["class","  bi bi-toggle-on"],["class"," bi bi-toggle-off"],[1,"btn-scroll"],["columns","5"],[3,"value"],[1,"ico","bi","bi-toggle-on",3,"click"],[1,"bi","bi-toggle-off",3,"click"],[1,"bi","bi-toggle-on",3,"click"],[3,"click"],[1,"bi","bi-floppy2-fill"],[1,"div-item",3,"ngClass","click"],["class","edit-visible"],[1,"edit-visible"],[1,"bi","bi-pencil"],[1,"bi","bi-trash3"]],template:function(t,n){t&1&&(r(0,"app-permission")(1,"div",0)(2,"div",1)(3,"div",2)(4,"p",3),u(5),r(6,"input",4,5),d("change",function(w){return n.changedInputName(w)})("ngModelChange",function(w){return n._Rol.rol.name=w}),l(),u(8),r(9,"input",6),d("ngModelChange",function(w){return n._Rol.rol.code=w}),l()()(),r(10,"p",3),u(11),r(12,"select",7),d("change",function(w){return n.onSelectChangePage(w)}),g(13,ae,2,1,"option",8)(14,ce,2,1),P(15,de,2,2,"option",17,se),l()(),r(17,"div",9)(18,"p",3),u(19),r(20,"button",10),g(21,_e,1,0,"i",11)(22,me,1,0),l()(),r(23,"p",3),u(24),r(25,"button",10),g(26,pe,1,0,"i",11)(27,ue,1,0),l()(),r(28,"p",3),u(29),r(30,"button",10),g(31,Ce,1,0,"i",11)(32,fe,1,0),l()(),r(33,"p",3),u(34),r(35,"button",10),g(36,xe,1,0,"i",11)(37,ge,1,0),l()()(),r(38,"div",9)(39,"p",3),u(40),r(41,"button",10),g(42,he,1,0,"i",11)(43,Re,1,0),l()(),r(44,"p",3),u(45),r(46,"button",12),g(47,we,1,0,"i",13)(48,ve,1,0),l()(),r(49,"p",3),u(50),r(51,"button",12),g(52,be,1,0,"i",13)(53,Se,1,0),l()(),r(54,"p",3),u(55),r(56,"button",12),g(57,Ve,1,0,"i",13)(58,ke,1,0),l()(),r(59,"p",3),u(60),r(61,"button",12),g(62,Te,1,0,"i",13)(63,ye,1,0,"i",14),l()()()(),r(64,"div",15),g(65,Ae,2,0,"button"),l()(),r(66,"app-common-custom-grid",16),g(67,Oe,2,0),l()()),t&2&&(c(5),C(" ",n.languageTraslate("Nombre rol")," "),c(1),b("ngModel",n._Rol.rol.name),c(2),C(" ",n.languageTraslate("Codigo")," "),c(1),b("ngModel",n._Rol.rol.code),c(2),C(" ",n.languageTraslate("Paginas")," "),c(2),x(13,n._Rol.rol.id=="00000000-0000-0000-0000-000000000000"?13:14),c(2),E(n._Rol.listPages),c(4),C(" ",n.languageTraslate("Comprador")," "),c(2),x(21,n._Rol.rol.isCustomer?21:22),c(3),C(" ",n.languageTraslate("Vendedor")," "),c(2),x(26,n._Rol.rol.isVendor?26:27),c(3),C(" ",n.languageTraslate("Fabricante")," "),c(2),x(31,n._Rol.rol.isMaker?31:32),c(3),C(" ",n.languageTraslate("Administrador")," "),c(2),x(36,n._Rol.rol.isAdmin?36:37),c(4),C(" ",n.languageTraslate("Guardar")," "),c(2),x(42,n._Rol.rol.permissionByRoll.save?42:43),c(3),C(" ",n.languageTraslate("Eliminar")," "),c(2),x(47,n._Rol.rol.permissionByRoll.delete?47:48),c(3),C(" ",n.languageTraslate("Leer")," "),c(2),x(52,n._Rol.rol.permissionByRoll.read?52:53),c(3),C(" ",n.languageTraslate("Compartir")," "),c(2),x(57,n._Rol.rol.permissionByRoll.share?57:58),c(3),C(" ",n.languageTraslate("Publico")," "),c(2),x(62,n._Rol.rol.isPublic?62:-1),c(1),x(63,n._Rol.rol.isPublic?-1:63),c(2),x(65,65),c(2),x(67,n._Rol.listRolUser!=null?67:-1))},dependencies:[W,K,Q,z,q,J,D,$,Y,Z],styles:[".scroll-menu[_ngcontent-%COMP%]{width:100vw;overflow:hidden}.containe-concept-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px;row-gap:5px;column-gap:5px;background-color:#000;width:100%;overflow:auto}.containe-concept-menu[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{min-width:100px;padding:5px;border-radius:5px;background-color:#000;color:#fff}.active[_ngcontent-%COMP%]{border:1px solid white;box-shadow:-1px 1px 2px #fff,inset 0 0 8px #fff}.disable[_ngcontent-%COMP%]{border:none;box-shadow:0 0 2px #fff}.btn-scroll[_ngcontent-%COMP%]{display:flex;justify-content:end;column-gap:10px;align-items:center;background-color:#ff4500;box-shadow:0 0 5px #000;padding:5px;border-radius:5px}.btn-scroll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;background-color:#000;box-shadow:0 0 5px #000,inset 0 0 5px #fff;color:#fff;padding:2px;height:45px;min-width:50px;display:flex;justify-content:center;align-items:center}.btn-scroll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}.scroll[_ngcontent-%COMP%]{display:flex;width:99%;padding:5px;background-color:#0ff;height:200px;overflow:hidden;justify-content:start}.permission-mode[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;background-color:bisque;padding:5px;margin-top:10px;justify-content:space-evenly;align-items:center;column-gap:5px}.permission-mode[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:auto;width:80px;border-radius:5px;padding:5px;justify-content:center;align-items:center;background-color:gray}.ico[_ngcontent-%COMP%]{font-size:25px;border-radius:5px;display:flex;justify-content:center;align-items:center}"]});let o=s;return o})();export{nt as AdminRolUserComponent};
