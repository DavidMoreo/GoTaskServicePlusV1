import{a as J,b as G,c as D,e as H,f as j}from"./chunk-FWKZQHCM.js";import{a as $}from"./chunk-5BMLOIMT.js";import{a as w}from"./chunk-ISTIWSIF.js";import"./chunk-LQ45HHEO.js";import"./chunk-Q2UCRY37.js";import"./chunk-MVUZ45C4.js";import"./chunk-ROSI6QSI.js";import"./chunk-OMG2A7U2.js";import"./chunk-VLMSGL5J.js";import{a as k,b as U}from"./chunk-DY7UBFIR.js";import"./chunk-MV2P2U5R.js";import{$ as I,A as l,B as u,E as x,H as v,I as b,K as A,L,M as n,N as a,Na as q,O as g,P,Pa as F,Q as _,Qa as z,R as p,Ra as R,Va as N,X as c,Y as M,Z as V,i as S,s as B,ta as O,u as m,v as f,va as E,xa as T}from"./chunk-EYTT7SII.js";function nt(r,o){if(r&1){let i=P();n(0,"button",12),_("click",function(){m(i);let e=p(2);return f(e.SetCodeVerification())}),c(1,"Pedir c\xF3digo verificaci\xF3n"),a()}}function rt(r,o){if(r&1){let i=P();n(0,"button",13),_("click",function(){m(i);let e=p(2);return f(e.BuyProductAlmacen())}),c(1,"Comprar"),a()}}function ot(r,o){if(r&1){let i=P();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"p"),c(4,"\u2714 Estos datos son requeridos para la entrega"),a(),n(5,"p"),c(6,"\u2714 El pago total se realizar\xE1 tras la entrega de su pedido"),a(),n(7,"p"),c(8,"\u2714 Despues de este registro te indicartemos donde puedes reclamar el producto"),a()(),n(9,"p",4),c(10),n(11,"input",5),_("ngModelChange",function(e){m(i);let d=p();return f(d._BuyProduct.buy.Buyer.customer=e)}),a()(),g(12,"br"),n(13,"p",4),c(14),n(15,"input",6),_("ngModelChange",function(e){m(i);let d=p();return f(d.mobileNumber=e)}),a()(),n(16,"p",4),c(17),n(18,"input",7),_("ngModelChange",function(e){m(i);let d=p();return f(d.codeVerificationInput=e)}),a()(),n(19,"div",8),v(20,nt,2,0,"button",9),n(21,"button",10),_("click",function(){m(i);let e=p();return f(e.CancelBuyProduct())}),c(22,"Cancelar"),a(),v(23,rt,2,0,"button",11),a()()()}if(r&2){let i=p();l(10),V(" ",i.languageTraslate("Nombre de quien recibe")," "),l(1),x("ngModel",i._BuyProduct.buy.Buyer.customer),l(3),V(" ",i.languageTraslate("Telefono de contacto")," "),l(1),x("ngModel",i.mobileNumber),l(2),V(" ",i.languageTraslate("Codigo de verificaci\xF3no")," "),l(1),x("ngModel",i.codeVerificationInput),l(2),b(20,i.mobileNumber.toString().length>=10&&i._BuyProduct.buy.Buyer.customer!=""&&i.codeVerificationInput.length<=4?20:-1),l(3),b(23,i.codeVerificationInput!=null&&i.codeVerificationInput!=""&&i.codeVerificationInput.length>=3?23:-1)}}var K=(()=>{let o=class o{constructor(t,e,d,s,C,y,h){this.route=t,this.type="all",this.page=0,this._listGuid=new Array,this.isBuyProduct=!1,this.city="",this.mobileNumber=0,this.codeVerification="",this.codeVerificationInput="",this._titleService=e,this._BuyProduct=h,this._loading=y}ngOnInit(){this._titleService.setTitle("Mis compras"),this._BuyProduct.buy.Buyer=new D}searchProduct(t){this.route.navigate([t])}languageTraslate(t){return t}CancelBuyProduct(){this._BuyProduct.isBuyProduct=!1}BuyProduct(){var t=this.GetAllCartStorage();this.GetValidate()?this._BuyProduct.SaveBuyCountomer(t):alert("todos los campos son requeridos")}SetCodeVerification(){return S(this,null,function*(){var t=yield this._BuyProduct.GetCodeVerification(this.mobileNumber.toString());t.subscribe({next:e=>{this.codeVerification=e.data,alert("El c\xF3digo fue enviado al n\xFAmero "+this.mobileNumber),this._loading.Loading(!1)},error:e=>{this._loading.Loading(!1)}})})}BuyProductAlmacen(){if(this.codeVerification!=""&&this.codeVerificationInput.toUpperCase()===this.codeVerification.toUpperCase()){var t=this.GetAllCartStorage(),e=this.GetValidateInPlace();e==""?this._BuyProduct.SaveBuyCountomer(t):alert(e)}else alert("C\xF3digo de verificaci\xF3n requerido o el c\xF3digo no es correcto.")}onchangedCity(t){var e=t.target.value;e!="0"&&(this.city=e)}GetAllCartStorage(){var t=window.localStorage.getItem("cartBuy"),e=new Array;return t!=null&&t!=null&&t!=""&&(this._listProductCart=JSON.parse(t),this._listProductCart.forEach(d=>{var s=new G;s.idProduct=d.id,s.quantity=d.quantity,s.Buyer=this._BuyProduct.buy.Buyer,s.Buyer.address+=" Ciudad :"+this.city,e.push(s)})),e}GetValidate(){var t=!0;return(this._listProductCart==null||this._listProductCart==null||this._listProductCart.length<=0||this._BuyProduct.buy.Buyer==null||this._BuyProduct.buy.Buyer==null||this._BuyProduct.buy.Buyer.customer==""||this._BuyProduct.buy.Buyer.address==""||this._BuyProduct.buy.Buyer.note==""||this.mobileNumber.toString().length>=10||this.city=="")&&(t=!1),t}GetValidateInPlace(){var t="";return this.LoadInitialData(),this._BuyProduct.buy.Buyer.mobileNumber=this.mobileNumber.toString(),this._listProductCart==null||this._listProductCart==null||this._listProductCart.length<=0?t="No tiene productos en su carro de compras":this._BuyProduct.buy.Buyer==null||this._BuyProduct.buy.Buyer==null?t="Requrerimos sus datos para programar la entrega del producto":this._BuyProduct.buy.Buyer.customer==""?t="Nombre requerido":this._BuyProduct.buy.Buyer.mobileNumber==""&&(t="celular requerido"),t}LoadInitialData(){(this._BuyProduct.buy==null||this._BuyProduct.buy==null)&&(this._BuyProduct.buy=new G),this._BuyProduct.buy.Buyer==null&&this._BuyProduct.buy.Buyer==null&&(this._BuyProduct.buy.Buyer=new D)}};o.\u0275fac=function(e){return new(e||o)(u(T),u(O),u(E),u(w),u(w),u(k),u(j))},o.\u0275cmp=B({type:o,selectors:[["app-customer-buy-product"]],standalone:!0,features:[I],decls:1,vars:1,consts:[["class","container-customer"],[1,"container-customer"],[1,"container-input","input-data"],[1,"text-note"],[1,"text-form"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","number","name","name",3,"ngModel","ngModelChange"],["type","text","name","code",3,"ngModel","ngModelChange"],[1,"btn-menu"],["class"," verification"],[1,"btn","cancel",3,"click"],["class","btn buy"],[1,"verification",3,"click"],[1,"btn","buy",3,"click"]],template:function(e,d){e&1&&v(0,ot,24,8,"div",0),e&2&&b(0,d._BuyProduct.isBuyProduct?0:-1)},dependencies:[N,q,R,F,z],styles:[".container-customer[_ngcontent-%COMP%]{position:absolute;top:50px;width:100%;background-color:#867e7ebf;padding:10px;box-shadow:0 0 5px #000;display:flex;justify-content:center;align-items:center}@media (max-width: 480px){.container-customer[_ngcontent-%COMP%]{padding:0}}.input-data[_ngcontent-%COMP%]{width:500px;background-color:#fff;padding:10px;box-shadow:0 0 5px #000;border-radius:5px}@media (max-width: 480px){.input-data[_ngcontent-%COMP%]{width:100vw;padding-left:15px;padding-right:15px;z-index:100}}.btn-menu[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;width:100%;margin-top:20px;column-gap:10px}.btn[_ngcontent-%COMP%]{height:40px;width:80px;border-radius:5px;border:none;box-shadow:0 0 5px #000,0 0 1px 1px #fff inset;color:#fff}.buy[_ngcontent-%COMP%]{background-color:green}.cancel[_ngcontent-%COMP%]{background-color:#eb0000e3}textarea[_ngcontent-%COMP%]{width:90%;height:50px;border:1px solid black;border-radius:5px;resize:none}.text-note[_ngcontent-%COMP%]{background-color:green;padding:5px;border-radius:5px;box-shadow:0 3px 5px #000;margin-bottom:10px;color:#fff}select[_ngcontent-%COMP%]{width:92%}.verification[_ngcontent-%COMP%]{height:39px;width:auto;background-color:#00f;border-radius:5px;padding:5px;color:#fff;border:none;box-shadow:0 0 5px #000,0 0 5px #000 inset;border:1px solid white}"]});let r=o;return r})();var Q=(r,o)=>o.id;function at(r,o){if(r&1&&g(0,"app-item-product-cart",13),r&2){let i=o.$implicit;x("product",i)}}function ct(r,o){if(r&1&&(n(0,"div",7)(1,"p",14),c(2),a(),n(3,"p",10),c(4),a()()),r&2){let i=o.$implicit;l(2),M(i.name),l(2),M(i.priceString)}}function dt(r,o){if(r&1){let i=P();n(0,"div",3),A(1,at,1,1,"app-item-product-cart",13,Q),a(),n(3,"div",4)(4,"div",5)(5,"h3",6),c(6,"Pecios"),a(),n(7,"div",7)(8,"p",8),c(9,"Nombre"),a(),n(10,"p",9),c(11,"Precio"),a()(),A(12,ct,5,2,"div",15,Q),n(14,"div",7)(15,"p",9),c(16,"Precio Total"),a(),n(17,"p",10),c(18),a()(),n(19,"div",7),g(20,"p",9),n(21,"p",10)(22,"button",11),_("click",function(){m(i);let e=p();return f(e.BuyProduct(!0))}),c(23,"Ir a tienda "),g(24,"i",12),a()()()()()}if(r&2){let i=p();l(1),L(i._CartService._listProduct),l(11),L(i._CartService._listProduct),l(6),M(i.SumValuesProduct(i._CartService._listProduct))}}function ut(r,o){r&1&&(n(0,"p",16),c(1,"No tienes productos en tu carrito"),a())}var St=(()=>{let o=class o{constructor(t,e,d,s,C,y,h,W){this.route=t,this._Notifi=W,this.type="all",this.page=0,this._param=d,this._titleService=e,this._CartService=s,this._CartService=C,this._loading=y,this._BuyProduct=h}ngDoCheck(){}ngOnInit(){this._titleService.setTitle("Mi carrito de compras"),this.loadData()}loadData(){return S(this,null,function*(){this._loading.Loading(!0),this._CartService.GetAllCartStorage(),this._CartService._listProductCart.forEach(t=>{this._CartService.listGuid.push(t.id)}),this._CartService.GetAllProduct(this._CartService.listGuid,0)})}searchProduct(t){this.route.navigate([t])}loadProductCart(){}SumValuesProduct(t){var e=0;return this._CartService.GetAllCartStorage(),this._CartService._listProductCart.forEach(s=>{var C=this._CartService._listProductCart.find(h=>h.id==s.id),y=this._CartService._listProduct.find(h=>h.id==s.id);C!=null&&C!=null&&y?.actualPrice!=null&&(e+=y?.actualPrice*C.quantity)}),e.toLocaleString("es-CO",{style:"currency",currency:"COP"})}BuyProduct(t){this._BuyProduct.isBuyProduct=t}};o.\u0275fac=function(e){return new(e||o)(u(T),u(O),u(E),u(w),u(w),u(k),u(j),u(H))},o.\u0275cmp=B({type:o,selectors:[["app-customer-list-cart"]],standalone:!0,features:[I],decls:7,vars:2,consts:[[3,"active"],[1,"scroll"],[1,"container-prices-general"],[1,"product-container"],[1,"container-prices"],[1,"prices"],[1,"title"],[1,"price-item"],[1,"title-name"],[1,"title-price"],[1,"value"],[1,"buy-product",3,"click"],[1,"bi","bi-shop"],[3,"product"],[1,"name"],["class","price-item"],[1,"title1"]],template:function(e,d){e&1&&(g(0,"app-common-loading",0),n(1,"div",1)(2,"div",2),v(3,dt,25,1)(4,ut,2,0),a()(),g(5,"app-customer-buy-product")(6,"app-menu-phone")),e&2&&(x("active",d._CartService.GetListNull()),l(3),b(3,d._CartService._listProduct!=null?3:4))},dependencies:[J,U,N,K,$],styles:[".product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;background-color:#fff;min-width:50%;height:100vh;padding-top:10px;align-items:center;row-gap:19px;overflow:hidden;overflow-y:auto;padding-bottom:300px}@media (max-width: 900px){.product-container[_ngcontent-%COMP%]{min-width:100vw;max-width:100vw;width:auto}}.container-prices-general[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:start}@media (max-width: 901px){.container-prices-general[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:start;align-items:center;row-gap:10px}}.container-prices[_ngcontent-%COMP%]{min-width:50%;min-height:100px;background-color:#fff;border-radius:2px;box-shadow:0 0 5px #000}.prices[_ngcontent-%COMP%]{background-color:#fff}.price-item[_ngcontent-%COMP%]{border-bottom:1px solid #80808054;display:flex;flex-direction:row;justify-content:space-between;padding:5px 100px 5px 10px}@media (max-width: 480px){.price-item[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;min-width:100vw}}.value[_ngcontent-%COMP%]{width:150px;text-align:start;font-weight:700;font-size:14px}.name[_ngcontent-%COMP%]{font-size:14px;width:250px}.title[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:100px}.title-price[_ngcontent-%COMP%]{width:150px;text-align:start;font-weight:700}@media (max-width: 480px){.name[_ngcontent-%COMP%]{padding-left:10px;font-size:10px;overflow:hidden;width:60%}.title-name[_ngcontent-%COMP%]{padding-left:10px;font-weight:700;text-align:start}.title-price[_ngcontent-%COMP%]{width:46%;font-weight:700;text-align:start}}.buy-product[_ngcontent-%COMP%]{background-color:green;color:#fff;height:35px;width:auto;border-radius:5px;border:none;box-shadow:0 0 5px #000;cursor:pointer}.title1[_ngcontent-%COMP%]{background-color:green;color:#fff;text-align:center;padding:5px;width:100%;margin-top:100px}"]});let r=o;return r})();export{St as ListCartComponet};
