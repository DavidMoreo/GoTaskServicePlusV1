import{p as u}from"./chunk-EYTT7SII.js";var n=class{};var w=(()=>{let s=class s{constructor(){this.gradosARadianes=t=>t*Math.PI/180,navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(t=>{t.state==="granted"&&this.GetCoordinates()}):console.log("El navegador no soporta el API de permisos")}GetCoordinates(){var t=new Promise((e,a)=>{if(!navigator.geolocation)a("Geolocalizaci\xF3n no est\xE1 disponible en este dispositivo.");else{let r={enableHighAccuracy:!0};navigator.geolocation.getCurrentPosition(o=>{let i=new n;i.latitud=o.coords.longitude,i.longitud=o.coords.latitude,e(i)},o=>{a(`Error al obtener la ubicaci\xF3n: ${o.message}`)},r)}});t.then(e=>{window.localStorage.setItem("GPS",JSON.stringify(e))})}GetCoordinatesAuto(){this.ChangedDistance();var t=new Promise((e,a)=>{if(!navigator.geolocation)a("Geolocalizaci\xF3n no est\xE1 disponible en este dispositivo.");else{let r={enableHighAccuracy:!0,maximumAge:0};this.watchId=navigator.geolocation.watchPosition(o=>{let i=new n;i.latitud=o.coords.latitude,i.longitud=o.coords.longitude,e(i)},o=>{a(`Error al obtener la ubicaci\xF3n: ${o.message}`)},r)}});t.then(e=>{window.localStorage.setItem("GPS",JSON.stringify(e))})}ChangedDistance(){var t=setInterval(()=>{console.log("gps"),clearInterval(t),this.GetCoordinatesAuto()},7e3)}SetCordinates(){this.GetCoordinates()}DeleteCordinates(){window.localStorage.removeItem("GPS")}GetGpsActive(){var t=window.localStorage.getItem("GPS");return t!=null&&t!=null&&t!=""}GetGps(){var t=new n,e=window.localStorage.getItem("GPS");return this.GetGpsActive()&&e!=null&&(t=JSON.parse(e)),t}GetDistance(t,e){if(this.GetGpsActive()){var a=this.GetGps();return this.CalculateDistance(t,e,a.latitud,a.longitud)}return"Gps \u2754"}CalculateDistance(t,e,a,r){t=this.gradosARadianes(t),e=this.gradosARadianes(e),a=this.gradosARadianes(a),r=this.gradosARadianes(r);let o=6371,i=r-e,h=a-t,g=Math.pow(Math.sin(h/2),2)+Math.cos(t)*Math.cos(a)*Math.pow(Math.sin(i/2),2),l=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));var m=o*l>=1?" km":"m",d="";o*l>=1?d=(o*l).toString().substr(0,3):d=(o*l*1e3).toString().substr(0,3);var v=d+" "+m;return v}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})();export{n as a,w as b};
